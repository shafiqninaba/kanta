# Story 1.1: Camera View Layout and Basic UI

## Status
Approved

## Story
**As a** user attending an event  
**I want** to see a retro-styled camera interface  
**So that** I can experience the nostalgic feel of using a disposable camera

## Acceptance Criteria
1. Camera view displays live camera feed centered on screen
2. Lens vignetting effect is applied around the edges of the camera feed
3. Film grain overlay is visible on the camera feed
4. Shot counter displays remaining shots in retro digital segment font (e.g., "20/20")
5. Large shutter button is prominently displayed and styled like a physical camera button
6. Upload button is present but less prominent than shutter button
7. Interface follows the defined color palette (#222831, #31363F, #76ABAE, #EEEEEE)

## Tasks / Subtasks
- [ ] Set up Next.js project structure and base configuration (AC: 7)
  - [ ] Initialize Next.js 14+ project with TypeScript
  - [ ] Configure Tailwind CSS with custom color palette
  - [ ] Set up CSS-in-JS solution (Styled Components or Emotion)
  - [ ] Configure project structure following architecture guidelines
  - [ ] Set up ESLint and Prettier with pre-commit hooks
- [ ] Create camera page and main layout component (AC: 1)
  - [ ] Create `/src/app/camera/page.tsx` following Next.js App Router
  - [ ] Implement responsive layout container
  - [ ] Set up mobile-first design approach
- [ ] Implement camera feed component with getUserMedia API (AC: 1)
  - [ ] Create `/src/components/camera/CameraFeed.tsx` component
  - [ ] Implement useCamera hook in `/src/hooks/useCamera.ts`
  - [ ] Add camera permission request handling
  - [ ] Implement fallback UI for devices without camera
- [ ] Apply retro visual effects to camera feed (AC: 2, 3)
  - [ ] Implement vignetting effect using CSS radial gradient
  - [ ] Create film grain overlay using CSS/Canvas
  - [ ] Ensure effects don't impact performance on mobile
  - [ ] Use CSS Modules for lens effect styling
- [ ] Create shot counter component (AC: 4)
  - [ ] Create `/src/components/camera/ShotCounter.tsx`
  - [ ] Implement retro digital segment font display
  - [ ] Add state management for shot count (start at 20/20)
  - [ ] Style with teal accent color (#76ABAE)
- [ ] Implement shutter button component (AC: 5)
  - [ ] Create `/src/components/camera/ShutterButton.tsx`
  - [ ] Style to resemble physical camera button
  - [ ] Add hover and active states
  - [ ] Ensure large touch target for mobile
- [ ] Create upload button component (AC: 6)
  - [ ] Create file upload button with less visual prominence
  - [ ] Position appropriately in layout
  - [ ] Style consistently with design system
- [ ] Apply color palette and typography (AC: 7)
  - [ ] Configure Tailwind with custom colors
  - [ ] Select and implement retro sans-serif font
  - [ ] Apply consistent styling across all components
- [ ] Write unit tests for all components
  - [ ] Test camera permission handling
  - [ ] Test shot counter display and state
  - [ ] Test button interactions
  - [ ] Test responsive behavior

## Dev Notes

### Previous Story Insights
No previous stories exist - this is the first story implementation.

### Tech Stack Details
[Source: brownfield-architecture/core-technologies-framework.md]
- **Framework**: Next.js 14+ with App Router
- **UI Library**: React 18+
- **TypeScript**: Required throughout codebase
- **Styling**: 
  - Tailwind CSS for rapid prototyping
  - CSS-in-JS (Styled Components or Emotion) for component styles
  - CSS Modules for unique effects like lens vignetting
- **State Management**: React Context API with useReducer for component state
- **Testing**: Jest + React Testing Library

### Project Structure
[Source: brownfield-architecture/application-structure.md]
```
/src/
├── app/                    # Next.js App Router pages
│   └── camera/
│       └── page.tsx       # Camera view page
├── components/
│   └── camera/
│       ├── CameraFeed.tsx
│       ├── ShutterButton.tsx
│       ├── ShotCounter.tsx
│       └── FlashOverlay.tsx
├── hooks/
│   ├── useCamera.ts
│   └── useImageUpload.ts
├── styles/
│   └── globals.css        # Global styles and Tailwind
└── lib/
    └── constants.ts       # Color palette, fonts, etc.
```

### Styling Requirements
[Source: brownfield-prd/visual-design-and-aesthetic.md]
**Color Palette**:
- `#222831` - Dark Slate (Primary background)
- `#31363F` - Charcoal Grey (Secondary backgrounds)  
- `#76ABAE` - Teal Blue (Accent, interactive elements)
- `#EEEEEE` - Light Grey (Text, subtle backgrounds)

**Visual Effects**:
- Lens vignetting: CSS radial-gradient on overlay div
- Film grain: Semi-transparent noise texture overlay
- Both effects should be subtle and not impact performance

### Camera Access Implementation
[Source: brownfield-architecture/core-technologies-framework.md]
- Use WebRTC getUserMedia API for camera access
- Implement through a custom hook for reusability
- Must handle permission states gracefully
- Provide fallback UI when camera unavailable

### Component Specifications
[Source: brownfield-prd/key-ui-components.md]
- **CameraFeed**: Video element displaying live stream
- **ShutterButton**: Large, tactile appearance, easy mobile access
- **ShotCounter**: Digital segment display font, shows "XX/20" format
- **Upload Button**: Secondary prominence, standard file input

### Performance Requirements
[Source: brownfield-prd/introduction-and-goals.md]
- Camera interface loads within 2 seconds
- Visual effects render smoothly without frame drops
- Mobile-first optimization required

### Testing Requirements
[Source: brownfield-architecture/development-workflow-best-practices.md]
- Unit tests with Jest + React Testing Library
- Test files co-located with components (e.g., `CameraFeed.test.tsx`)
- Mock getUserMedia API for testing
- Test responsive behavior and accessibility

### Important Notes
- This is a brownfield project transitioning from Streamlit to Next.js
- No existing Next.js frontend code exists yet - this story creates the foundation
- Follow mobile-first approach throughout implementation
- Ensure all interactive elements have proper touch targets

## Testing
- **Test file location**: Co-located with components (e.g., `/src/components/camera/CameraFeed.test.tsx`)
- **Test standards**: Follow React Testing Library best practices
- **Testing frameworks**: Jest + React Testing Library
- **Specific requirements**:
  - Mock getUserMedia API calls
  - Test camera permission states (granted, denied, prompt)
  - Test responsive layout breakpoints
  - Verify color palette application
  - Test component rendering without camera access
  - Ensure accessibility compliance (WCAG guidelines)

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-07-28 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

### Agent Model Used
_To be populated by dev agent_

### Debug Log References
_To be populated by dev agent_

### Completion Notes List
_To be populated by dev agent_

### File List
_To be populated by dev agent_

## QA Results
_To be populated by QA agent_